const homeRowWords = {
  "the": 0.053703179637025325,
  "to": 0.02691534803926914,
  "a": 0.022908676527677748,
  "that": 0.010232929922807537,
  "on": 0.008128305161640995,
  "as": 0.005888436553555884,
  "at": 0.005011872336272725,
  "he": 0.004897788193684466,
  "not": 0.004897788193684466,
  "an": 0.0033884415613920273,
  "so": 0.003311311214825908,
  "one": 0.002951209226666384,
  "out": 0.00239883291901949,
  "has": 0.0023442288153199225,
  "no": 0.002238721138568338,
  "she": 0.0018197008586099826,
  "than": 0.0013489628825916534,
  "see": 0.0012589254117941662,
  "then": 0.0011748975549395304,
  "these": 0.001096478196143185,
  "us": 0.001096478196143185,
  "too": 0.0008912509381337459,
  "those": 0.0007943282347242822,
  "use": 0.0006456542290346549,
  "state": 0.0006025595860743581,
  "house": 0.0005128613839913648,
  "set": 0.0003890451449942805,
  "seen": 0.0003311311214825908,
  "states": 0.0003311311214825908,
  "season": 0.0003019951720402019,
  "oh": 0.0002691534803926914,
  "south": 0.0002511886431509582,
  "soon": 0.0002089296130854041,
  "non": 0.00019498445997580456,
  "son": 0.00019054607179632484,
  "shot": 0.00016595869074375596,
  "sense": 0.00015488166189124827,
  "test": 0.00015488166189124827,
  "east": 0.0001445439770745928,
  "hot": 0.0001445439770745928,
  "sent": 0.0001445439770745928,
  "eat": 0.00013489628825916533,
  "hate": 0.00012882495516931347,
  "ones": 0.00011748975549395304,
  "sea": 0.00011481536214968817,
  "ten": 0.00011220184543019629,
  "note": 0.0001096478196143185,
  "ass": 0.0001,
  "san": 0.00009332543007969906,
  "sun": 0.00009332543007969906,
  "none": 0.0000851138038202376,
  "thus": 0.00008128305161640996,
  "uses": 0.00007585775750291836,
  "status": 0.00007413102413009176,
  "heat": 0.00007244359600749906,
  "notes": 0.00006918309709189363,
  "estate": 0.00006606934480075965,
  "seat": 0.00006606934480075965,
  "senate": 0.00006309573444801929,
  "stone": 0.00006309573444801929,
  "usa": 0.00006165950018614822,
  "shut": 0.000060255958607435806,
  "host": 0.00005888436553555884,
  "onto": 0.00005888436553555884,
  "net": 0.000057543993733715664,
  "honest": 0.00005370317963702533,
  "shoot": 0.00005370317963702533,
  "taste": 0.00005370317963702533,
  "tea": 0.00005370317963702533,
  "houses": 0.000052480746024977226,
  "sets": 0.00004897788193684466,
  "shoes": 0.000046773514128719816,
  "tests": 0.000046773514128719816,
  "sat": 0.00004365158322401656,
  "ah": 0.00004265795188015926,
  "shots": 0.00004265795188015926,
  "eu": 0.00004168693834703355,
  "un": 0.00004168693834703355,
  "sees": 0.000038904514499428046,
  "ha": 0.00003801893963205613,
  "teeth": 0.00003801893963205613,
  "assets": 0.0000363078054770101,
  "haha": 0.000033884415613920276,
  "hat": 0.000033884415613920276,
  "seats": 0.000033884415613920276,
  "seasons": 0.000033113112148259076,
  "thats": 0.000033113112148259076,
  "nose": 0.00003235936569296281,
  "sons": 0.000031622776601683795,
  "hunt": 0.00003090295432513592,
  "santa": 0.00003090295432513592,
  "tone": 0.00003090295432513592,
  "auto": 0.000030199517204020192,
  "tons": 0.00002884031503126606,
  "houston": 0.000026302679918953814,
  "na": 0.000026302679918953814,
  "tho": 0.000025703957827688645,
  "nah": 0.000025118864315095822,
  "sheet": 0.000025118864315095822,
  "anna": 0.00002344228815319923,
  "ann": 0.00002238721138568338,
  "ate": 0.000021877616239495516,
  "ease": 0.000021877616239495516,
  "stats": 0.000021379620895022323,
  "teen": 0.000021379620895022323,
  "anne": 0.00002089296130854041,
  "sean": 0.000020417379446695274,
  "stones": 0.000020417379446695274,
  "nuts": 0.00001995262314968879,
  "ton": 0.000019498445997580456,
  "huh": 0.000018620871366628657,
  "tune": 0.000018620871366628657,
  "eh": 0.000018197008586099827,
  "uh": 0.000018197008586099827,
  "shoe": 0.00001737800828749376,
  "susan": 0.00001737800828749376,
  "asset": 0.00001698243652461746,
  "hosts": 0.00001698243652461746,
  "utah": 0.00001698243652461746,
  "ho": 0.000016595869074375598,
  "sue": 0.000016595869074375598,
  "nasa": 0.0000162181009735893,
  "soot": 0.0000162181009735893,
  "sensation": 0.00001584881688353443,
  "tenth": 0.00001584881688353443,
  "thou": 0.000015488166189124827,
  "unto": 0.000015135612484362124,
  "hose": 0.000014791083881682189,
  "sans": 0.00001445439770745928,
  "tent": 0.00001445439770745928,
  "ants": 0.000014125375446227554,
  "hasten": 0.000013803842646028845,
  "stun": 0.000013489628825916534,
  "tuna": 0.000013489628825916534,
  "eaten": 0.000013182567385883552,
  "ashes": 0.000012882495516098923,
  "sane": 0.000012589254117941662,
  "tents": 0.00001230268671754501,
  "aston": 0.000012022574346026923,
  "hues": 0.000011481536214968817,
  "sash": 0.000011220184543019629,
  "tans": 0.00001096478196143185,
  "hath": 0.000010715193072754793,
  "santo": 0.00001047128548050947,
  "hones": 0.000010232929922807537,
  "stash": 0.00001,
  "antes": 0.000009772372209558113,
  "hunts": 0.000009549925860214562,
  "onset": 0.000009332543007969906,
  "shone": 0.000009332543007969906,
  "snout": 0.00000911881971344246,
  "snot": 0.000008909718689932364,
  "stets": 0.000008705031269252778,
  "tastes": 0.000008504553843570335,
  "shuns": 0.000008115440366780585,
  "sous": 0.000007926422438473476,
  "tats": 0.000007740849565325727,
  "teth": 0.000007558541272328812,
  "thane": 0.000007379321074226851,
  "hent": 0.000007203016372644759,
  "sates": 0.000007029458366390364,
  "stoat": 0.000006858481971019368,
  "tauten": 0.000006689925727197073,
  "thanes": 0.000006523631719901318,
  "toast": 0.000006359445494937012,
  "touses": 0.000006197215983583739,
  "unset": 0.000006036795427843312,
  "hents": 0.00000587803932174243,
  "shent": 0.00000572080625336507,
  "shote": 0.000005565957846007985,
  "snath": 0.000005413358614357318,
  "snots": 0.000005262875909623709,
  "stanes": 0.000005114379873228265,
  "stases": 0.000004823224090173933,
  "stoss": 0.0000046803201347745,
  "tasset": 0.000004539040277029343,
  "tasses": 0.0000043992687012543,
  "tath": 0.000004260891918562211,
  "teas": 0.000004123798750654095,
  "teats": 0.00000398788021445186,
  "teths": 0.000003853029407592074,
  "thens": 0.0000035861131672729846,
  "theses": 0.0000034548434168202838,
  "thous": 0.000003324232564110512,
  "toasts": 0.000003194182598466706,
  "toeas": 0.000003064597003458466,
  "toise": 0.000002935380672115528,
  "tonus": 0.000002806439827697896,
  "toshes": 0.00000267768194586576,
  "tush": 0.000002420350762513573,
  "unhat": 0.000002291597887028622,
  "unseats": 0.000002162668584541018,
  "unsets": 0.000002033475155422714,
  "usneas": 0.0000019039316039808573,
  "usque": 0.0000017739525746237314,
  "utases": 0.0000016434532877414964
};


function generateHomeRowPassage(wordCount) {
  const words = Object.keys(homeRowWords);
  const probabilities = Object.values(homeRowWords);

  // Build cumulative probability array
  const cumulativeProbs = [];
  let total = 0;
  for (let i = 0; i < probabilities.length; i++) {
    total += probabilities[i];
    cumulativeProbs.push(total);
  }

  // Normalize just in case total isn't exactly 1
  for (let i = 0; i < cumulativeProbs.length; i++) {
    cumulativeProbs[i] /= total;
  }

  // Function to pick a word based on cumulative probabilities
  function pickWord() {
    const rand = Math.random();
    for (let i = 0; i < cumulativeProbs.length; i++) {
      if (rand < cumulativeProbs[i]) {
        return words[i];
      }
    }
    return words[words.length - 1]; // fallback
  }

  // Generate the string
  // Avoid consecutive 2 duplicates
  const result = [];
  for (let i = 0; i < wordCount; i++) {
    var word = pickWord();
    while (result[result.length - 1] === word || result[result.length - 2] === word) {
      word = pickWord();
    }
    result.push(word);
  }

  return result.join(' ');
}

export {generateHomeRowPassage}